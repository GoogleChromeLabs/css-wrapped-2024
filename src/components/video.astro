---
interface Props {
  src: string;
  width?: number;
  height?: number;
  poster?: string;
  preload?: string;
}

const { src, width = 720, height = 480, poster = "", preload = "metadata" } = Astro.props;
---

<video
  src={src}
  width={width}
  height={height}
  controls
  muted
  loop
  playsinline
  preload={preload}
  poster={poster}
  onmouseenter="event.target.setAttribute('preload','metadata')"
  style=`aspect-ratio: ${width} / ${height};`>
  Your browser does not support video
</video>

<style>
  /* @keyframes rounded-mask-reveal {
    from {
      clip-path: inset(10% 10% 10% 10% round var(--radius-3));
    }
    to {
      clip-path: inset(0% 0% 0% 0% round var(--radius-3));
    }
  } */

  @layer components.video {
    /* @supports (animation-timeline: view()) {
      video {
        animation: rounded-mask-reveal linear both;
        animation-timeline: view();
        animation-range: cover 0% cover 25%;
      }
    } */

    video {
      background-color: var(--surface-2);
      border-radius: var(--radius-3);
      overflow: clip;
    }
  }
</style>
